{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///react-countdown-clock.js","webpack:///webpack/bootstrap 1fab16f502182c089d86","webpack:///./react-countdown-clock.coffee","webpack:///external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","React","createClass","_seconds","_radius","_fraction","_content","_canvas","_timeoutIds","displayName","propTypes","seconds","PropTypes","number","size","weight","color","string","fontSize","font","alpha","timeFormat","onComplete","func","showMilliseconds","bool","getDefaultProps","componentWillReceiveProps","props","_resetCanvas","_setupTimer","componentDidMount","componentWillUnmount","_cancelTimer","_setScale","_setupCanvas","_drawTimer","_startTimer","_updateCanvas","_clearTimer","_tickPeriod","_calculateTick","_innerRadius","tick","tickScale","refs","canvas","_context","getContext","textAlign","textBaseline","push","setTimeout","_this","_tick","i","len","ref","results","timeout","length","clearTimeout","start","Date","now","duration","_handleComplete","clearRect","width","height","_drawBackground","beginPath","globalAlpha","arc","Math","PI","fill","_formattedTime","decimals","hours","minutes","timeParts","1","parseInt","toFixed","join","_fontSize","timeString","scale","formattedTime","percent","fillStyle","fillText","render","createElement","className"],"mappings":"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","file":"react-countdown-clock.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactCountdownClock\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"ReactCountdownClock\"] = factory(root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactCountdownClock\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"ReactCountdownClock\"] = factory(root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/build/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar React;\n\t\n\tReact = __webpack_require__(1);\n\t\n\tmodule.exports = React.createClass({\n\t  _seconds: 0,\n\t  _radius: null,\n\t  _fraction: null,\n\t  _content: null,\n\t  _canvas: null,\n\t  _timeoutIds: [],\n\t  displayName: 'ReactCountdownClock',\n\t  propTypes: {\n\t    seconds: React.PropTypes.number,\n\t    size: React.PropTypes.number,\n\t    weight: React.PropTypes.number,\n\t    color: React.PropTypes.string,\n\t    fontSize: React.PropTypes.string,\n\t    font: React.PropTypes.string,\n\t    alpha: React.PropTypes.number,\n\t    timeFormat: React.PropTypes.string,\n\t    onComplete: React.PropTypes.func,\n\t    showMilliseconds: React.PropTypes.bool\n\t  },\n\t  getDefaultProps: function() {\n\t    return {\n\t      seconds: 60,\n\t      size: 300,\n\t      color: '#000',\n\t      alpha: 1,\n\t      timeFormat: 'hms',\n\t      fontSize: 'auto',\n\t      font: 'Arial',\n\t      showMilliseconds: true\n\t    };\n\t  },\n\t  componentWillReceiveProps: function(props) {\n\t    this._seconds = props.seconds;\n\t    this._resetCanvas();\n\t    return this._setupTimer();\n\t  },\n\t  componentDidMount: function() {\n\t    this._seconds = this.props.seconds;\n\t    return this._setupTimer();\n\t  },\n\t  componentWillUnmount: function() {\n\t    return this._cancelTimer();\n\t  },\n\t  _setupTimer: function() {\n\t    this._setScale();\n\t    this._setupCanvas();\n\t    this._drawTimer();\n\t    return this._startTimer();\n\t  },\n\t  _updateCanvas: function() {\n\t    this._clearTimer();\n\t    return this._drawTimer();\n\t  },\n\t  _resetCanvas: function() {\n\t    this._cancelTimer();\n\t    return this._clearTimer();\n\t  },\n\t  _setScale: function() {\n\t    this._radius = this.props.size / 2;\n\t    this._fraction = 2 / this._seconds;\n\t    this._tickPeriod = this._calculateTick();\n\t    return this._innerRadius = this.props.weight ? this._radius - this.props.weight : this._radius / 1.8;\n\t  },\n\t  _calculateTick: function() {\n\t    var tick, tickScale;\n\t    tickScale = 1.8;\n\t    tick = this._seconds * tickScale;\n\t    if (tick > 1000) {\n\t      return 1000;\n\t    } else {\n\t      return tick;\n\t    }\n\t  },\n\t  _setupCanvas: function() {\n\t    this._canvas = this.refs.canvas;\n\t    this._context = this._canvas.getContext('2d');\n\t    this._context.textAlign = 'center';\n\t    return this._context.textBaseline = 'middle';\n\t  },\n\t  _startTimer: function() {\n\t    return this._timeoutIds.push(setTimeout(((function(_this) {\n\t      return function() {\n\t        return _this._tick();\n\t      };\n\t    })(this)), 200));\n\t  },\n\t  _cancelTimer: function() {\n\t    var i, len, ref, results, timeout;\n\t    ref = this._timeoutIds;\n\t    results = [];\n\t    for (i = 0, len = ref.length; i < len; i++) {\n\t      timeout = ref[i];\n\t      results.push(clearTimeout(timeout));\n\t    }\n\t    return results;\n\t  },\n\t  _tick: function() {\n\t    var start;\n\t    start = Date.now();\n\t    return this._timeoutIds.push(setTimeout(((function(_this) {\n\t      return function() {\n\t        var duration;\n\t        duration = (Date.now() - start) / 1000;\n\t        _this._seconds -= duration;\n\t        if (_this._seconds <= 0) {\n\t          _this._seconds = 0;\n\t          _this._handleComplete();\n\t          return _this._clearTimer();\n\t        } else {\n\t          _this._updateCanvas();\n\t          return _this._tick();\n\t        }\n\t      };\n\t    })(this)), this._tickPeriod));\n\t  },\n\t  _handleComplete: function() {\n\t    if (this.props.onComplete) {\n\t      return this.props.onComplete();\n\t    }\n\t  },\n\t  _clearTimer: function() {\n\t    this._context.clearRect(0, 0, this._canvas.width, this._canvas.height);\n\t    return this._drawBackground();\n\t  },\n\t  _drawBackground: function() {\n\t    this._context.beginPath();\n\t    this._context.globalAlpha = this.props.alpha / 3;\n\t    this._context.arc(this._radius, this._radius, this._radius, 0, Math.PI * 2, false);\n\t    this._context.arc(this._radius, this._radius, this._innerRadius, Math.PI * 2, 0, true);\n\t    return this._context.fill();\n\t  },\n\t  _formattedTime: function() {\n\t    var decimals, hours, minutes, ref, seconds, timeParts;\n\t    decimals = (ref = this._seconds <= 9.9 && this.props.showMilliseconds) != null ? ref : {\n\t      1: 0\n\t    };\n\t    if (this.props.timeFormat === 'hms') {\n\t      hours = parseInt(this._seconds / 3600) % 24;\n\t      minutes = parseInt(this._seconds / 60) % 60;\n\t      seconds = (this._seconds % 60).toFixed(decimals);\n\t      if (hours < 10) {\n\t        hours = \"0\" + hours;\n\t      }\n\t      if (minutes < 10) {\n\t        minutes = \"0\" + minutes;\n\t      }\n\t      if (seconds < 10 && minutes >= 1) {\n\t        seconds = \"0\" + seconds;\n\t      }\n\t      timeParts = [];\n\t      if (hours > 0) {\n\t        timeParts.push(hours);\n\t      }\n\t      if (minutes > 0) {\n\t        timeParts.push(minutes);\n\t      }\n\t      timeParts.push(seconds);\n\t      return timeParts.join(':');\n\t    } else {\n\t      return this._seconds.toFixed(decimals);\n\t    }\n\t  },\n\t  _fontSize: function(timeString) {\n\t    var scale, size;\n\t    if (this.props.fontSize === 'auto') {\n\t      scale = (function() {\n\t        switch (timeString.length) {\n\t          case 8:\n\t            return 4;\n\t          case 5:\n\t            return 3;\n\t          default:\n\t            return 2;\n\t        }\n\t      })();\n\t      size = this._radius / scale;\n\t      return size + \"px\";\n\t    } else {\n\t      return this.props.fontSize;\n\t    }\n\t  },\n\t  _drawTimer: function() {\n\t    var formattedTime, percent;\n\t    percent = this._fraction * this._seconds + 1.5;\n\t    formattedTime = this._formattedTime();\n\t    this._context.globalAlpha = this.props.alpha;\n\t    this._context.fillStyle = this.props.color;\n\t    this._context.font = \"bold \" + (this._fontSize(formattedTime)) + \" \" + this.props.font;\n\t    this._context.fillText(formattedTime, this._radius, this._radius);\n\t    this._context.beginPath();\n\t    this._context.arc(this._radius, this._radius, this._radius, Math.PI * 1.5, Math.PI * percent, false);\n\t    this._context.arc(this._radius, this._radius, this._innerRadius, Math.PI * percent, Math.PI * 1.5, true);\n\t    return this._context.fill();\n\t  },\n\t  render: function() {\n\t    return React.createElement(\"canvas\", {\n\t      \"ref\": 'canvas',\n\t      \"className\": \"react-countdown-clock\",\n\t      \"width\": this.props.size,\n\t      \"height\": this.props.size\n\t    });\n\t  }\n\t});\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// react-countdown-clock.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1fab16f502182c089d86","React  = require 'react'\n\nmodule.exports = React.createClass\n  _seconds: 0\n  _radius: null\n  _fraction: null\n  _content: null\n  _canvas: null\n  _timeoutIds: []\n\n  displayName: 'ReactCountdownClock'\n\n  propTypes:\n    seconds: React.PropTypes.number\n    size: React.PropTypes.number\n    weight: React.PropTypes.number\n    color: React.PropTypes.string\n    fontSize: React.PropTypes.string\n    font: React.PropTypes.string\n    alpha: React.PropTypes.number\n    timeFormat: React.PropTypes.string\n    onComplete: React.PropTypes.func\n    showMilliseconds: React.PropTypes.bool\n\n  getDefaultProps: ->\n    seconds: 60\n    size: 300\n    color: '#000'\n    alpha: 1\n    timeFormat: 'hms'\n    fontSize: 'auto'\n    font: 'Arial'\n    showMilliseconds: true\n\n  componentWillReceiveProps: (props) ->\n    @_seconds = props.seconds\n    @_resetCanvas() # reset canvas on seconds change from user events\n    @_setupTimer()\n\n  componentDidMount: ->\n    @_seconds = @props.seconds\n    @_setupTimer()\n\n  componentWillUnmount: ->\n    @_cancelTimer()\n\n  _setupTimer: ->\n    @_setScale()\n    @_setupCanvas()\n    @_drawTimer()\n    @_startTimer()\n\n  _updateCanvas: ->\n    @_clearTimer()\n    @_drawTimer()\n\n  _resetCanvas: ->\n    @_cancelTimer()\n    @_clearTimer()\n\n  _setScale: ->\n    @_radius      = @props.size / 2\n    @_fraction    = 2 / @_seconds\n    @_tickPeriod  = @_calculateTick()\n    @_innerRadius =\n      if @props.weight\n        @_radius - @props.weight\n      else\n        @_radius / 1.8\n\n  _calculateTick: ->\n    # Tick period (milleseconds) needs to be fast for smaller time periods and slower\n    # for longer ones. This provides smoother rendering. It should never exceed 1 second.\n    tickScale = 1.8\n    tick = @_seconds * tickScale\n    if tick > 1000 then 1000 else tick\n\n  _setupCanvas: ->\n    @_canvas  = @refs.canvas\n    @_context = @_canvas.getContext '2d'\n    @_context.textAlign = 'center'\n    @_context.textBaseline = 'middle'\n\n  _startTimer: ->\n    # Give it a moment to collect it's thoughts for smoother render\n    @_timeoutIds.push(setTimeout ( => @_tick() ), 200)\n\n  _cancelTimer: ->\n    for timeout in @_timeoutIds\n      clearTimeout timeout\n\n  _tick: ->\n    start = Date.now()\n    @_timeoutIds.push(setTimeout ( =>\n      duration = (Date.now() - start) / 1000\n      @_seconds -= duration\n\n      if @_seconds <= 0\n        @_seconds = 0\n        @_handleComplete()\n        @_clearTimer()\n      else\n        @_updateCanvas()\n        @_tick()\n    ), @_tickPeriod)\n\n  _handleComplete: ->\n    if @props.onComplete\n      @props.onComplete()\n\n  _clearTimer: ->\n    @_context.clearRect 0, 0, @_canvas.width, @_canvas.height\n    @_drawBackground()\n\n  _drawBackground: ->\n    @_context.beginPath()\n    @_context.globalAlpha = @props.alpha / 3\n    @_context.arc @_radius, @_radius,      @_radius,           0, Math.PI * 2, false\n    @_context.arc @_radius, @_radius, @_innerRadius, Math.PI * 2,           0, true\n    @_context.fill()\n\n  _formattedTime: ->\n    decimals = (@_seconds <= 9.9 && @props.showMilliseconds) ? 1 : 0\n\n    if @props.timeFormat == 'hms'\n      hours   = parseInt( @_seconds / 3600 ) % 24\n      minutes = parseInt( @_seconds / 60 ) % 60\n      seconds = (@_seconds % 60).toFixed(decimals)\n\n      hours   = \"0#{hours}\" if hours < 10\n      minutes = \"0#{minutes}\" if minutes < 10\n      seconds = \"0#{seconds}\" if seconds < 10 && minutes >= 1\n\n      timeParts = []\n      timeParts.push hours if hours > 0\n      timeParts.push minutes if minutes > 0\n      timeParts.push seconds\n\n      timeParts.join ':'\n    else\n      return @_seconds.toFixed(decimals)\n\n  _fontSize: (timeString) ->\n    if @props.fontSize == 'auto'\n      scale = switch timeString.length\n        when 8 then 4 # hh:mm:ss\n        when 5 then 3 # mm:ss\n        else 2        # ss or ss.s\n      size = @_radius / scale\n      \"#{size}px\"\n    else\n      @props.fontSize\n\n  _drawTimer: ->\n    percent = @_fraction * @_seconds + 1.5\n    formattedTime = @_formattedTime()\n    @_context.globalAlpha = @props.alpha\n    @_context.fillStyle = @props.color\n    @_context.font = \"bold #{@_fontSize(formattedTime)} #{@props.font}\"\n    @_context.fillText formattedTime, @_radius, @_radius\n    @_context.beginPath()\n    @_context.arc @_radius, @_radius,      @_radius,     Math.PI * 1.5, Math.PI * percent, false\n    @_context.arc @_radius, @_radius, @_innerRadius, Math.PI * percent,     Math.PI * 1.5, true\n    @_context.fill()\n\n  render: ->\n    React.createElement(\"canvas\", {\"ref\": 'canvas', \"className\": \"react-countdown-clock\", \"width\": (@props.size), \"height\": (@props.size)})\n\n\n\n// WEBPACK FOOTER //\n// ../~/cjsx-loader!./react-countdown-clock.coffee","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}\n// module id = 1\n// module chunks = 0"],"sourceRoot":""}